- clean: ['~', '$XDG_CONFIG_HOME']

- shell:
    - [git submodule update --init --recursive, Installing submodules]

# ========
# Defaults
# ========
- defaults:
    link:
      relink: true
      create: true
      relative: true
      glob: true
      force: true

# ============
# Common links
# ============
- link:
    # directories
    # -----------
    ~/.config/nvim: neovim
    ~/.config/termite: termite
    ~/.config/firefox: firefox
    ~/.config/colors: colors

    # globs
    # -----
    ~/.ssh/:
      path: ssh/*
    ~/bin/:
      path: bin/*

    # files
    # -----
    # -- gpg
    ~/.gitconfig: git/config
    ~/.gitconfig-work: git/config-work
    ~/.gitconfig-personal: git/config-personal
    ~/.gitignore_global: git/gitignore_global
    ~/.gnupg/gpg-agent.conf: gnupg/gpg-agent.conf
    ~/.gnupg/sshcontrol: gnupg/sshcontrol

    # -- tmux
    ~/.tmux.conf: tmux/tmux.conf
    # ~/.config/tmux/base16.conf: tmux/base16.256.tmuxtheme
    ~/.config/tmux/base16.conf: tmux/base16.tmuxtheme
    ~/.config/tmux/copy-paste.macos.conf:
      path: tmux/copy-paste.macos.conf
      if: '[ "$(uname -s)" "==" "Darwin" ]'
    ~/.config/tmux/copy-paste.xorg.conf:
      path: tmux/copy-paste.xorg.conf
      if: '[ "$(uname -s)" "==" "Linux" ]'
    ~/.config/tmux/tmux-shell.macos.conf:
      path: tmux/tmux-shell.macos.conf
      if: '[ "$(uname -s)" "==" "Darwin" ]'

    # -- zsh
    ~/.config/zsh: zsh
    ~/.zshenv: zshenv

    # -- bash
    ~/.bash_profile: .bash_profile
    ~/.bashrc: .bashrc

    # -- generic shell
    ~/.profile: .profile
    ~/.profile.d/:
      path: .profile.d/*
    ~/.env: env
    ~/.env.d/:
      path: env.d/*

    # -- misc
    ~/.vimperator: vimperator
    ~/.vimperatorrc: vimperatorrc

- shell:
  -
    command: |-
      cmd="$(command -v dircolors || command -v gdircolors)" || { echo "no dircolors command found " ; exit 1; }
      [ -d ~/.env.d ] || mkdir -p ~/.env.d
      $cmd colors/LS_COLORS/LS_COLORS > ~/.env.d/LS_COLORS
    stdin: true
    stdout: true
    stderr: true
    description: Generating LS_COLORS
    quiet: false

# =========
# Alacritty
# =========
- link:
    ~/.config/alacritty/base.yml:
      path: alacritty/base.yml
    ~/.config/alacritty/base16-colors.yml:
      path: alacritty/base16-colors.yml
    ~/.config/alacritty/keybindings.yml:
      path: alacritty/keybindings.yml

- defaults:
    link:
      relink: true
      create: true
      relative: true
      glob: true
      if: '[ "$(uname -s)" "==" "Darwin" ]'
- link:
    ~/.config/alacritty/base.platform.yml:
      path: alacritty/base.macos.yml
    ~/.config/alacritty/keybindings.platform.yml:
      path: alacritty/keybindings.macos.yml

- defaults:
    link:
      relink: true
      create: true
      relative: true
      glob: true
      if: '[ "$(uname -s)" "==" "Linux" ]'
- link:
    ~/.config/alacritty/base.platform.yml:
      path: alacritty/base.linux.yml
    ~/.config/alacritty/keybindings.platform.yml:
      path: alacritty/keybindings.linux.yml

- shell:
  -
    command: >-
      cat
      ~/.config/alacritty/base.yml
      ~/.config/alacritty/base.platform.yml
      ~/.config/alacritty/base16-colors.yml
      ~/.config/alacritty/keybindings.yml
      ~/.config/alacritty/keybindings.platform.yml
      > ~/.config/alacritty/alacritty.yml
    stdin: true
    stdout: true
    stderr: true
    description: Generating alacritty config
    quiet: false

# ================
# MacOS only links
# ================
- defaults:
    link:
      relink: true
      create: true
      relative: true
      glob: true
      if: '[ "$(uname -s)" "==" "Darwin" ]'

- link:
    # directories
    # -----------
    ~/.config/iterm2: iterm2
    ~/.mpd: mpd
    ~/Library/Application Support/Übersicht/widgets: ubersicht/widgets
    ~/.config/brewfile: brewfile
    ~/.config/chunkwm: chunkwm
    ~/.config/yabai: yabai

    # globs
    # -----
    ~/Library/LaunchAgents/:
      path: Library/LaunchAgents/*

    # files
    # -----
    ~/.chunkwmrc: chunkwm/chunkwmrc.sh
    ~/.yabairc: yabai/yabairc.sh
    ~/.skhdrc: skhdrc
    ~/Library/Application Support/Übersicht/widgets: ubersicht/widgets

# ================
# Linux only links
# ================
- defaults:
    link:
      relink: true
      create: true
      relative: true
      glob: true
      if: '[ "$(uname -s)" "==" "Linux" ]'

- link:
    # directories
    # -----------
    ~/.config/sway: sway
    ~/.config/rofi: rofi
    # ~/.config/fontconfig: fontconfig
    ~/.Xresources.d: Xresources.d
    ~/.config/i3status: i3status
    ~/.config/i3status-rust: i3status-rust
    ~/.config/i3: i3
    ~/.local/share/systemd: systemd
    ~/.local/share/barrier: barrier

    # files
    # -----
    ~/.xbindkeysrc: xbindkeysrc
    ~/.Xresources: Xresources
    ~/.xinitrc: xinitrc
    ~/.xprofile: xprofile
    ~/.config/compton.conf: compton.conf

# =======
# Scripts
# =======
# - shell:
#   -
#     command: $XDG_CONFIG_HOME/colors/base16_profile_helper.sh
#     stdin: true
#     stdout: true
#     stderr: true
#     description: Applying colors
#     quiet: false
