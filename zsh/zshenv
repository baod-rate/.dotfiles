#!/usr/bin/env zsh
[[ -r ~/.env ]] && emulate sh -c ". ~/.env"

export SHELL="zsh"

# /etc/zprofile on macOS loads /usr/libexec/path_helper which overwrites PATH
# disable it
setopt no_global_rcs

# ==> nvim-remote
export NVIM_LISTEN_ADDRESS=/tmp/nvimsocket

# ==> colors
export BASE16_SHELL_HOOKS=$XDG_CONFIG_HOME/colors/base16-shell-hooks
export BASE16_SHELL=$XDG_CONFIG_HOME/colors/base16-shell

# ==> setup default editor
if (( $+commands[nvim] )) ; then
  export VISUAL=nvim
  export NVIM_TUI_ENABLE_TRUE_COLOR=1
elif (( $+commands[vim] )) ; then
  export VISUAL=vim
else
  echo 'could not find neovim or vim; not setting $VISUAL'
fi

# ==> use gpg-agent as ssh-agent
## unset SSH_AGENT_PID
## if [ "${gnupg_SSH_AUTH_SOCK_by:-0}" -ne $$ ]; then
##   export SSH_AUTH_SOCK="$(gpgconf --list-dirs agent-ssh-socket)"
## fi
## export GPG_TTY=$(tty)
## echo "UPDATESTARTUPTTY" | gpg-connect-agent > /dev/null 2>&1

# workaround for issue with qtwebengine + opengl + nouveau
# see https://bugs.archlinux.org/task/59057
QT_XCB_FORCE_SOFTWARE_OPENGL=1

export DOTNET_CLI_TELEMETRY_OPTOUT=1
